function dselectUpdate(e,t,i){const m=e.dataset.dselectValue,c=e.closest(`.${t}`).previousElementSibling,f=c.nextElementSibling.getElementsByClassName(i)[0],r=c.nextElementSibling.querySelector("input");c.multiple?Array.from(c.options).filter(d=>d.value===m)[0].selected=!0:c.value=m,c.multiple&&f.click(),c.dispatchEvent(new Event("change")),f.focus(),r&&(r.value="")}function dselectRemoveTag(e,t,i){const m=e.parentNode.dataset.dselectValue,c=e.closest(`.${t}`).previousElementSibling,f=c.nextElementSibling.getElementsByClassName(i)[0],r=c.nextElementSibling.querySelector("input");Array.from(c.options).filter(d=>d.value===m)[0].selected=!1,c.dispatchEvent(new Event("change")),f.click(),r&&(r.value="")}function dselectSearch(e,t,i,m,c,f){const r=t.value.toLowerCase().trim(),d=t.nextElementSibling,$=d.querySelectorAll(".dropdown-header"),E=d.querySelectorAll(".dropdown-item"),v=d.nextElementSibling;$.forEach(l=>l.classList.add("d-none"));for(const l of E)if(l.textContent.toLowerCase().indexOf(r)>-1){l.classList.remove("d-none");let u=l;for(;u=u.previousElementSibling;)if(u.classList.contains("dropdown-header")){u.classList.remove("d-none");break}}else l.classList.add("d-none");for(const l of $)if(l.textContent.toLowerCase().indexOf(r)>-1){l.classList.remove("d-none");let u=l;for(;(u=u.nextElementSibling)&&!u.classList.contains("dropdown-header");)u.classList.remove("d-none")}if(Array.from(E).filter(l=>!l.classList.contains("d-none")&&!l.hasAttribute("hidden")).length<1){if(v.classList.remove("d-none"),d.classList.add("d-none"),c&&(v.innerHTML=f.replace("[searched-term]",t.value),e.key==="Enter")){const l=t.closest(`.${i}`).previousElementSibling,g=l.nextElementSibling.getElementsByClassName(m)[0];l.insertAdjacentHTML("afterbegin",`<option value="${t.value}" selected>${t.value}</option>`),l.dispatchEvent(new Event("change")),t.value="",t.dispatchEvent(new Event("keyup")),g.click(),g.focus()}}else v.classList.add("d-none"),d.classList.remove("d-none")}function dselectClear(e,t){const i=e.closest(`.${t}`).previousElementSibling;Array.from(i.options).forEach(m=>m.selected=!1),i.dispatchEvent(new Event("change"))}function dselect(e,t={}){e.style.display="none";const i="dselect-wrapper",m="dselect-no-results",c="dselect-tag-remove",f="dselect-tag",r="dselect-placeholder",d="dselect-clear",$="dselect-clearable",E="text-bg-dark bg-gradient",v=!1,L=!1,l=!1,g="360px",u="",H="",O="Search..",z='Press Enter to add "<strong>[searched-term]</strong>"',B="No results found",R=S("search")||t.search||v,N=S("creatable")||t.creatable||L,T=S("clearable")||t.clearable||l,I=e.dataset.dselectMaxHeight||t.maxHeight||g,q=e.dataset.dselectdClassTag||t.classTag||E,j=`${f} ${q}`,U=e.dataset.dselectSearchPlaceholder||t.searchPlaceholder||O,V=e.dataset.dselectNoResultsPlaceholder||t.noResultsPlaceholder||B,Y=e.dataset.dselectAddOptionPlaceholder||t.addOptionPlaceholder||z,A=e.dataset.dselectItemClass||t.ItemClass||H,w=e.dataset.dselectSize||t.size||u,b=`form-select${w!==""?` form-select-${w}`:""}`,D=R?`<input onkeydown="return event.key !== 'Enter'" onkeyup="dselectSearch(event, this, '${i}', '${b}', ${N})" type="text" class="form-control" placeholder="${U}" autofocus>`:"";function S(n){const a=`data-dselect-${n}`;return e.hasAttribute(a)?e.getAttribute(a).toLowerCase()==="true":null}function G(){e.nextElementSibling&&e.nextElementSibling.classList&&e.nextElementSibling.classList.contains(i)&&e.nextElementSibling.remove()}function x(n){return n.getAttribute("value")===""}function k(n,a){if(a){const s=Array.from(n).filter(o=>o.selected&&!x(o)),h=Array.from(n).filter(o=>x(o));let p=[];if(s.length===0){const o=h.length?h[0].textContent:"&nbsp;";p.push(`<span class="${r}">${o}</span>`)}else for(const o of s)p.push(`
            <div class="${j}" data-dselect-value="${o.value}">
              ${o.text}
              <svg onclick="dselectRemoveTag(this, '${i}', '${b}')" class="${c}" width="14" height="14" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/></svg>
            </div>
          `);return p.join("")}else{const s=n[n.selectedIndex];return x(s)?`<span class="${r}">${s.innerHTML}</span>`:s.innerHTML}}function P(n){const a=n[n.selectedIndex];return x(a)?"":a.textContent}function M(n){let a=[];for(const s of n)if(s.tagName==="OPTGROUP")a.push(`<h6 class="dropdown-header">${s.getAttribute("label")}</h6>`);else{const h=x(s)?" hidden":"",p=s.selected?" active":"",o=s.selected?" disabled":"",K=s.getAttribute("disabled"),Q=A===""?"":" "+A;disableitem="",K!==null?disableitem="disabled='true'":disableitem="";const W=s.value;let y=s.textContent;if(s.hasAttribute("data-dselect-img")&&s.getAttribute("data-dselect-img").trim()!==""){const X=s.getAttribute("data-dselect-img").trim();let C="1rem";w=="sm"?C=".7rem":w=="lg"&&(C="1.2rem"),y=`<span class="d-flex align-items-center">
            <img src="${X}" style="max-height:${C}; width:auto;">
            <span class="ps-2">${y}</span>
          </span>`}a.push(`<button${h} class="dropdown-item${p}${Q}"  ${disableitem} data-dselect-value="${W}" type="button" onclick="dselectUpdate(this, '${i}', '${b}')" ${o}>
          ${y}
        </button>`)}return a=a.join(""),a}function F(){const n=e.multiple?' data-bs-auto-close="outside"':"",a=Array.from(e.classList).filter(o=>o!=="form-select"&&o!=="form-select-sm"&&o!=="form-select-lg").join(" "),s=T&&!e.multiple?`
    <button type="button" class="btn ${d}" title="Clear selection" onclick="dselectClear(this, '${i}')">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" fill="none">
        <path d="M13 1L0.999999 13" stroke-width="2" stroke="currentColor"></path>
        <path d="M1 1L13 13" stroke-width="2" stroke="currentColor"></path>
      </svg>
    </button>
    `:"",h=`
    <div class="dropdown ${i} ${a}">
      <button class="${b} ${!e.multiple&&T?$:""}" data-dselect-text="${!e.multiple&&P(e.options)}" type="button" data-bs-toggle="dropdown" aria-expanded="false"${n}>
        ${k(e.options,e.multiple)}
      </button>
      <div class="dropdown-menu">
        <div class="d-flex flex-column">
          ${D}
          <div class="dselect-items" style="max-height:${I};overflow:auto">
            ${M(e.querySelectorAll("*"))}
          </div>
          <div class="${m} d-none">${V}</div>
        </div>
      </div>
      ${s}
    </div>
    `;G(),e.insertAdjacentHTML("afterend",h),e.nextElementSibling.addEventListener("shown.bs.dropdown",function(){const o=this.querySelector('input[type="text"]');o&&o.focus()})}F();function J(){const n=e.nextElementSibling,a=n.getElementsByClassName(b)[0],s=n.getElementsByClassName("dselect-items")[0];a.innerHTML=k(e.options,e.multiple),s.innerHTML=M(e.querySelectorAll("*")),e.multiple||(a.dataset.dselectText=P(e.options))}e.addEventListener("change",J)}typeof module!="undefined"&&typeof module.exports!="undefined"&&(module.exports={dselectUpdate,dselectRemoveTag,dselectSearch,dselectClear,dselect});
